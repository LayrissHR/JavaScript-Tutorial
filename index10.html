<!DOCTYPE html>
<html lang="bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript –û—Å–Ω–æ–≤–∏: –û–±–æ–±—â–∏—Ç–µ–ª–µ–Ω –£—Ä–æ–∫</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Chosen Palette: Based on the provided image (Light Green/Cyan vibes) -->
    <!-- Background: #f0fdfa (Teal-50) -->
    <!-- Primary: #0d9488 (Teal-600) -->
    <!-- Secondary: #0f766e (Teal-700) -->
    <!-- Text: #134e4a (Teal-900) -->

    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0fdfa;
        color: #134e4a;
      }
      .code-font {
        font-family: "Fira Code", monospace;
      }

      .nav-item {
        transition: all 0.2s;
        border-left: 4px solid transparent;
      }
      .nav-item:hover {
        background-color: #ccfbf1;
      }
      .nav-active {
        background-color: #fff;
        border-left-color: #0d9488;
        font-weight: 700;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .code-block {
        background-color: #1e293b;
        color: #a5f3fc;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
      }
      .keyword {
        color: #c084fc;
      } /* purple */
      .func {
        color: #60a5fa;
      } /* blue */
      .string {
        color: #86efac;
      } /* green */

      .interactive-box {
        background: white;
        border: 2px dashed #99f6e4;
        padding: 1.5rem;
        border-radius: 0.5rem;
      }

      /* Code Editor Styles */
      .editor-area {
        background-color: #1e293b;
        color: #e2e8f0;
        font-family: "Fira Code", monospace;
        width: 100%;
        padding: 1rem;
        border-radius: 0.5rem;
        resize: vertical;
        min-height: 150px;
        border: 1px solid #475569;
      }
      .editor-area:focus {
        outline: none;
        border-color: #2dd4bf;
      }

      /* Animation for validation success */
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }
      .shake {
        animation: shake 0.5s;
      }
    </style>
  </head>
  <body class="h-screen flex flex-col md:flex-row overflow-hidden">
    <!-- Sidebar Navigation (Topics from Image) -->
    <aside
      class="w-full md:w-1/4 bg-teal-50 border-r border-teal-200 flex flex-col h-full"
    >
      <div class="p-6 border-b border-teal-200 bg-white">
        <h1 class="text-xl font-bold text-teal-800 flex items-center gap-2">
          <i class="fab fa-js text-yellow-500 text-2xl"></i>
          JS Masterclass
        </h1>
        <p class="text-xs text-teal-600 mt-1">–û–±–æ–±—â–µ–Ω–∏–µ & –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</p>
      </div>

      <nav class="flex-grow overflow-y-auto py-4 space-y-1" id="nav-container">
        <!-- Nav Items generated by JS -->
      </nav>

      <div class="p-4 bg-teal-800 text-white text-center text-sm">
        <div id="progress-text">–ü—Ä–æ–≥—Ä–µ—Å: 0%</div>
        <div class="w-full bg-teal-900 rounded-full h-2 mt-2">
          <div
            id="progress-bar"
            class="bg-yellow-400 h-2 rounded-full transition-all duration-500"
            style="width: 0%"
          ></div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-grow h-full overflow-y-auto p-6 md:p-10 relative">
      <div id="content-area" class="max-w-4xl mx-auto pb-20">
        <!-- Dynamic Content Injected Here -->
      </div>
    </main>

    <!-- JavaScript Application Logic -->
    <script>
      // --- DATA STRUCTURE (Topics from your image) ---
      const curriculum = [
        {
          id: "intro",
          title: "1. –°–∫—Ä–∏–ø—Ç–æ–≤–∏ –µ–∑–∏—Ü–∏ & –°—ä—â–Ω–æ—Å—Ç",
          icon: "fa-code",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–°—ä—â–Ω–æ—Å—Ç –Ω–∞ JavaScript</h2>
                    <p class="mb-4">JavaScript (JS) –µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω —Å–∫—Ä–∏–ø—Ç–æ–≤ –µ–∑–∏–∫, –∫–æ–π—Ç–æ –ø–æ–∑–≤–æ–ª—è–≤–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ—Ç–æ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ. –ó–∞ —Ä–∞–∑–ª–∏–∫–∞ –æ—Ç HTML (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) –∏ CSS (—Å—Ç–∏–ª), JS –¥–æ–±–∞–≤—è <strong>–ø–æ–≤–µ–¥–µ–Ω–∏–µ</strong>.</p>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-white p-4 rounded shadow-sm">
                            <h3 class="font-bold border-b pb-2 mb-2">–°—ä—Ä–≤—ä—Ä–Ω–∏ (Server-side)</h3>
                            <p class="text-sm">PHP, Python, Ruby. –†–∞–±–æ—Ç—è—Ç –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞, –≥–µ–Ω–µ—Ä–∏—Ä–∞—Ç HTML.</p>
                        </div>
                        <div class="bg-white p-4 rounded shadow-sm border-2 border-teal-400">
                            <h3 class="font-bold border-b pb-2 mb-2">–ö–ª–∏–µ–Ω—Ç—Å–∫–∏ (Client-side)</h3>
                            <p class="text-sm"><strong>JavaScript</strong>. –†–∞–±–æ—Ç–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –±—Ä–∞—É–∑—ä—Ä–∞ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è. –ë—ä—Ä–∑–∞ —Ä–µ–∞–∫—Ü–∏—è.</p>
                        </div>
                    </div>
                `,
          exercise: {
            type: "quiz",
            question:
              "–ö—ä–¥–µ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –ø—Ä–µ–¥–∏–º–Ω–æ JavaScript –∫–æ–¥—ä—Ç –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏—Ç–µ —É–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?",
            options: ["–ù–∞ —Å—ä—Ä–≤—ä—Ä–∞", "–í –±—Ä–∞—É–∑—ä—Ä–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞", "–í –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏"],
            answer: 1,
          },
        },
        {
          id: "vars_ops",
          title: "2. –ü—Ä–æ–º–µ–Ω–ª–∏–≤–∏ & –û–ø–µ—Ä–∞—Ç–æ—Ä–∏",
          icon: "fa-calculator",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–ü—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –∏ –¢–∏–ø–æ–≤–µ</h2>
                    <p class="mb-4">–ö—É—Ç–∏–π–∫–∏ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω–∏. –í –º–æ–¥–µ—Ä–Ω–∏—è JS –∏–∑–ø–æ–ª–∑–≤–∞–º–µ:</p>
                    <ul class="list-disc pl-5 mb-4 space-y-2">
                        <li><code class="code-font bg-teal-100 px-1 rounded">let</code> - –∑–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏, –∫–æ–∏—Ç–æ —Å–µ –ø—Ä–æ–º–µ–Ω—è—Ç.</li>
                        <li><code class="code-font bg-teal-100 px-1 rounded">const</code> - –∑–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ (–Ω–µ–ø—Ä–æ–º–µ–Ω–∏–º–∏).</li>
                        <li><code class="code-font bg-teal-100 px-1 rounded">var</code> - –æ—Å—Ç–∞—Ä—è–ª –Ω–∞—á–∏–Ω (–∏–∑–±—è–≥–≤–∞–π—Ç–µ).</li>
                    </ul>
                    <h3 class="text-xl font-bold mb-2">–û–ø–µ—Ä–∞—Ç–æ—Ä–∏</h3>
                    <div class="code-block mb-4 text-sm">
let sum = 10 <span class="keyword">+</span> 5; <span class="text-gray-500">// –ê—Ä–∏—Ç–º–µ—Ç–∏—á–µ–Ω (15)</span>
let check = 10 <span class="keyword">===</span> "10"; <span class="text-gray-500">// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ (false - —Ç–∏–ø–æ–≤–µ—Ç–µ —Å–∞ —Ä–∞–∑–ª–∏—á–Ω–∏)</span>
let logic = true <span class="keyword">&&</span> false; <span class="text-gray-500">// –õ–æ–≥–∏—á–µ—Å–∫–∏ (false)</span>
                    </div>
                `,
          interactive: `
                    <div class="interactive-box">
                        <h4 class="font-bold mb-2 text-teal-700">JS –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä & –¢–∏–ø–æ–≤–µ</h4>
                        <div class="flex gap-2 mb-2">
                            <input type="number" id="demo-var-a" class="border p-2 rounded w-20" value="5">
                            <select id="demo-op" class="border p-2 rounded">
                                <option value="+">+</option>
                                <option value="-">-</option>
                                <option value="==">== (–°—Ç–æ–π–Ω–æ—Å—Ç)</option>
                                <option value="===">=== (–¢–∏–ø & –°—Ç–æ–π–Ω–æ—Å—Ç)</option>
                            </select>
                            <input type="text" id="demo-var-b" class="border p-2 rounded w-20" value="5">
                        </div>
                        <button onclick="runCalc()" class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700">–ò–∑—á–∏—Å–ª–∏</button>
                        <div id="calc-result" class="mt-2 font-mono bg-slate-800 text-green-400 p-2 rounded">Result: ?</div>
                    </div>
                `,
          codeChallenge: {
            title: "–ó–∞–¥–∞—á–∞: –î–µ–∫–ª–∞—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏",
            desc: "–î–µ–∫–ª–∞—Ä–∏—Ä–∞–π—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ —Å –∏–º–µ <code>myAge</code> –∏ —ù –ø—Ä–∏—Å–≤–æ–µ—Ç–µ –≤–∞—à–∞—Ç–∞ –≤—ä–∑—Ä–∞—Å—Ç (–Ω–∞–ø—Ä. 25).",
            placeholder: "// –ù–∞–ø–∏—à–∏ –∫–æ–¥–∞ —Ç—É–∫\n",
            check: (code) => {
              return code.includes("myAge") && code.match(/=\s*\d+/);
            },
            successMsg: "–ë—Ä–∞–≤–æ! –î–µ–∫–ª–∞—Ä–∏—Ä–∞—Ö—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞.",
            failMsg:
              "–£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å—Ç–µ –∏–∑–ø–æ–ª–∑–≤–∞–ª–∏ –∏–º–µ—Ç–æ myAge –∏ —Å—Ç–µ –ø—Ä–∏—Å–≤–æ–∏–ª–∏ —á–∏—Å–ª–æ.",
          },
          exercise: {
            type: "quiz",
            question: '–ö–∞–∫—ä–≤ —â–µ –µ —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç: 5 + "5" ?',
            options: ["10 (Number)", '"55" (String)', "Error"],
            answer: 1,
          },
        },
        {
          id: "flow",
          title: "3. –£—Å–ª–æ–≤–Ω–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ & –¶–∏–∫–ª–∏",
          icon: "fa-random",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–ö–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –ø–æ—Ç–æ–∫–∞</h2>
                    <p class="mb-2">–ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –Ω–µ –≤–∏–Ω–∞–≥–∏ –≤—ä—Ä–≤–∏ –æ—Ç–≥–æ—Ä–µ –Ω–∞–¥–æ–ª—É. –ü–æ–Ω—è–∫–æ–≥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∑–µ–º–µ —Ä–µ—à–µ–Ω–∏–µ –∏–ª–∏ –¥–∞ –ø–æ–≤—Ç–æ—Ä–∏ –Ω–µ—â–æ.</p>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="font-bold">If / Else</h3>
                            <div class="code-block text-xs">
<span class="keyword">if</span> (age >= 18) {
  console.log("–ü—ä–ª–Ω–æ–ª–µ—Ç–µ–Ω");
} <span class="keyword">else</span> {
  console.log("–ù–µ–ø—ä–ª–Ω–æ–ª–µ—Ç–µ–Ω");
}
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold">–¶–∏–∫—ä–ª For</h3>
                            <div class="code-block text-xs">
<span class="keyword">for</span> (<span class="keyword">let</span> i=0; i<5; i++) {
  console.log(i); <span class="text-gray-500">// 0, 1, 2, 3, 4</span>
}
                            </div>
                        </div>
                    </div>
                `,
          interactive: `
                    <div class="interactive-box">
                        <h4 class="font-bold mb-2 text-teal-700">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –¶–∏–∫—ä–ª</h4>
                        <p class="text-sm mb-2">–í—ä–≤–µ–¥–∏ —á–∏—Å–ª–æ –¥–æ –∫–æ–µ—Ç–æ –¥–∞ –±—Ä–æ–∏–º:</p>
                        <input type="number" id="loop-limit" class="border p-2 rounded w-full mb-2" max="10" min="1" value="5">
                        <button onclick="runLoop()" class="bg-teal-600 text-white px-4 py-2 rounded w-full">–°—Ç–∞—Ä—Ç –Ω–∞ —Ü–∏–∫—ä–ª–∞</button>
                        <div id="loop-output" class="flex gap-2 mt-4 flex-wrap h-12 items-center"></div>
                    </div>
                `,
          codeChallenge: {
            title: "–ó–∞–¥–∞—á–∞: –°—É–º–∏—Ä–∞–Ω–µ —Å —Ü–∏–∫—ä–ª",
            desc: "–ù–∞–ø–∏—à–µ—Ç–µ —Ü–∏–∫—ä–ª, –∫–æ–π—Ç–æ —Å—ä–±–∏—Ä–∞ —á–∏—Å–ª–∞—Ç–∞ –æ—Ç 1 –¥–æ 5. –ó–∞–ø–∞–∑–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ –≤ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ —Å –∏–º–µ <code>total</code>. –ù–∞–∫—Ä–∞—è <code>total</code> —Ç—Ä—è–±–≤–∞ –¥–∞ –µ 15.",
            placeholder: "let total = 0;\n// –ù–∞–ø–∏—à–∏ for —Ü–∏–∫—ä–ª —Ç—É–∫\n\n",
            check: (code) => {
              try {
                // Safe-ish eval for education
                let total = 0;
                // Inject user code logic simulation
                eval(code);
                return total === 15;
              } catch (e) {
                return false;
              }
            },
            successMsg: "–°—É–ø–µ—Ä! 1+2+3+4+5 –Ω–∞–∏—Å—Ç–∏–Ω–∞ –µ 15.",
            failMsg: "–ì—Ä–µ—à–∫–∞ –∏–ª–∏ –≥—Ä–µ—à–µ–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç. –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ total –µ 15.",
          },
          exercise: {
            type: "quiz",
            question:
              "–ö–æ—è —á–∞—Å—Ç –æ—Ç for(let i=0; i<5; i++) —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å–ª–µ–¥ –≤—Å—è–∫–∞ –∏—Ç–µ—Ä–∞—Ü–∏—è?",
            options: ["let i=0", "i<5", "i++"],
            answer: 2,
          },
        },
        {
          id: "functions",
          title: "4. –§—É–Ω–∫—Ü–∏–∏",
          icon: "fa-cube",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–§—É–Ω–∫—Ü–∏–∏</h2>
                    <p class="mb-4">–§—É–Ω–∫—Ü–∏–∏—Ç–µ —Å–∞ –±–ª–æ–∫–æ–≤–µ –æ—Ç –∫–æ–¥, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏ –¥–∞ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –∑–∞–¥–∞—á–∞. –¢–µ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.</p>
                    <div class="code-block mb-4">
<span class="keyword">function</span> <span class="func">greet</span>(name) {
    <span class="keyword">return</span> "–ó–¥—Ä–∞–≤–µ–π, " + name + "!";
}

<span class="keyword">let</span> msg = <span class="func">greet</span>("–ò–≤–∞–Ω"); <span class="text-gray-500">// "–ó–¥—Ä–∞–≤–µ–π, –ò–≤–∞–Ω!"</span>
                    </div>
                `,
          interactive: `
                    <div class="interactive-box">
                        <h4 class="font-bold mb-2 text-teal-700">–§–∞–±—Ä–∏–∫–∞ –∑–∞ –ø–æ–∑–¥—Ä–∞–≤–∏</h4>
                        <div class="flex gap-2">
                            <input type="text" id="func-name" placeholder="–ò–º–µ..." class="border p-2 rounded flex-grow">
                            <button onclick="runGreet()" class="bg-teal-600 text-white px-4 py-2 rounded">–ò–∑–≤–∏–∫–∞–π greet()</button>
                        </div>
                        <div id="greet-result" class="mt-2 text-xl font-bold text-center text-teal-800 min-h-[2rem]"></div>
                    </div>
                `,
          codeChallenge: {
            title: "–ó–∞–¥–∞—á–∞: –ß–µ—Ç–Ω–æ –∏–ª–∏ –ù–µ—á–µ—Ç–Ω–æ?",
            desc: "–ù–∞–ø–∏—à–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è <code>isEven(n)</code>, –∫–æ—è—Ç–æ –≤—Ä—ä—â–∞ <code>true</code>, –∞–∫–æ —á–∏—Å–ª–æ—Ç–æ –µ —á–µ—Ç–Ω–æ, –∏ <code>false</code>, –∞–∫–æ –µ –Ω–µ—á–µ—Ç–Ω–æ.",
            placeholder: "function isEven(n) {\n  // –¢–≤–æ—è—Ç –∫–æ–¥\n}",
            check: (code) => {
              try {
                eval(code);
                if (typeof isEven !== "function") return false;
                return isEven(2) === true && isEven(3) === false;
              } catch (e) {
                return false;
              }
            },
            successMsg: "–ë—Ä–∞–≤–æ! –§—É–Ω–∫—Ü–∏—è—Ç–∞ —Ä–∞–±–æ—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ.",
            failMsg:
              "–§—É–Ω–∫—Ü–∏—è—Ç–∞ –Ω–µ –≤—Ä—ä—â–∞ –≤–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ 2 (—á–µ—Ç–Ω–æ) –∏ 3 (–Ω–µ—á–µ—Ç–Ω–æ).",
          },
          exercise: {
            type: "quiz",
            question: "–ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ –∫–ª—é—á–æ–≤–∞—Ç–∞ –¥—É–º–∞ return?",
            options: [
              "–°–ø–∏—Ä–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –∏ –≤—Ä—ä—â–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç",
              "–û—Ç–ø–µ—á–∞—Ç–≤–∞ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞",
              "–ü–æ–≤—Ç–∞—Ä—è —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞",
            ],
            answer: 0,
          },
        },
        {
          id: "objects",
          title: "5. –û–±–µ–∫—Ç–∏",
          icon: "fa-shapes",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–û–±–µ–∫—Ç–∏ (Objects)</h2>
                    <p class="mb-4">–û–±–µ–∫—Ç–∏—Ç–µ –≥—Ä—É–ø–∏—Ä–∞—Ç —Å–≤—ä—Ä–∑–∞–Ω–∏ –¥–∞–Ω–Ω–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ (–º–µ—Ç–æ–¥–∏). –¢–µ –æ–ø–∏—Å–≤–∞—Ç "–Ω–µ—â–∞" –æ—Ç —Ä–µ–∞–ª–Ω–∏—è —Å–≤—è—Ç.</p>
                    <div class="code-block mb-4">
<span class="keyword">let</span> car = {
    brand: <span class="string">"Toyota"</span>,  <span class="text-gray-500">// –°–≤–æ–π—Å—Ç–≤–æ (Property)</span>
    model: <span class="string">"Corolla"</span>,
    start: <span class="keyword">function</span>() { <span class="text-gray-500">// –ú–µ—Ç–æ–¥ (Method)</span>
        console.log("Vroom!");
    }
};
                    </div>
                `,
          interactive: `
                    <div class="interactive-box">
                        <h4 class="font-bold mb-2 text-teal-700">–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –û–±–µ–∫—Ç</h4>
                        <div class="flex gap-4">
                            <div class="w-1/2 bg-gray-800 text-green-400 p-2 rounded font-mono text-xs" id="obj-display">
                                { ... }
                            </div>
                            <div class="w-1/2 flex flex-col gap-2">
                                <input type="text" id="car-color" placeholder="–ù–æ–≤ —Ü–≤—è—Ç..." class="border p-1 rounded">
                                <button onclick="updateObject()" class="bg-teal-600 text-white px-2 py-1 rounded text-xs">car.color = ...</button>
                            </div>
                        </div>
                    </div>
                `,
          exercise: {
            type: "quiz",
            question: '–ö–∞–∫ –¥–æ—Å—Ç—ä–ø–≤–∞–º–µ —Å–≤–æ–π—Å—Ç–≤–æ "model" –Ω–∞ –æ–±–µ–∫—Ç–∞ "car"?',
            options: ["car(model)", "car.model", "car->model"],
            answer: 1,
          },
        },
        {
          id: "dom_events",
          title: "6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HTML & –°—ä–±–∏—Ç–∏—è",
          icon: "fa-mouse-pointer",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">DOM –∏ –°—ä–±–∏—Ç–∏—è</h2>
                    <p class="mb-4">Javascript "–≤–∏–∂–¥–∞" HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ –¥—ä—Ä–≤–æ –æ—Ç –æ–±–µ–∫—Ç–∏ (DOM). –¢–æ–π –º–æ–∂–µ –¥–∞ –ø—Ä–æ–º–µ–Ω—è –≤—Å–∏—á–∫–æ –∏ –¥–∞ —Ä–µ–∞–≥–∏—Ä–∞ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è.</p>
                    <ul class="list-disc pl-5 mb-4">
                        <li><code>onclick</code> - –ø—Ä–∏ –∫–ª–∏–∫.</li>
                        <li><code>onmouseover</code> - –ø—Ä–∏ –ø–æ—Å–æ—á–≤–∞–Ω–µ —Å –º–∏—à–∫–∞—Ç–∞.</li>
                        <li><code>onchange</code> - –ø—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç.</li>
                    </ul>
                `,
          interactive: `
                    <div class="interactive-box text-center">
                        <div id="event-box" 
                             class="w-32 h-32 bg-teal-200 mx-auto rounded flex items-center justify-center cursor-pointer transition-all duration-300"
                             onmouseover="this.style.backgroundColor='#fcd34d'; this.innerText='Mouse Over!'"
                             onmouseout="this.style.backgroundColor='#99f6e4'; this.innerText='Hover Me'"
                             onclick="triggerClickAnim(this)">
                            Hover Me
                        </div>
                        <p class="text-xs text-gray-500 mt-2">–ú–∏–Ω–∏ —Å –º–∏—à–∫–∞—Ç–∞ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏!</p>
                        <div id="click-counter" class="font-bold mt-2">Clicks: 0</div>
                    </div>
                `,
          exercise: {
            type: "quiz",
            question: "–ö–æ–π –º–µ—Ç–æ–¥ –∏–∑–±–∏—Ä–∞ HTML –µ–ª–µ–º–µ–Ω—Ç –ø–æ –Ω–µ–≥–æ–≤–æ—Ç–æ ID?",
            options: [
              "getElement(id)",
              "querySelector(id)",
              "getElementById(id)",
            ],
            answer: 2,
          },
        },
        {
          id: "validation",
          title: "7. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º—É–ª—è—Ä–∏",
          icon: "fa-check-double",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º–∏</h2>
                    <p class="mb-4">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –¥–∞–Ω–Ω–∏—Ç–µ, –≤—ä–≤–µ–¥–µ–Ω–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è, —Å–∞ –∫–æ—Ä–µ–∫—Ç–Ω–∏ –ø—Ä–µ–¥–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –∫—ä–º —Å—ä—Ä–≤—ä—Ä–∞.</p>
                    <h3 class="font-bold">–ß–µ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:</h3>
                    <ul class="list-disc pl-5 mb-4 text-sm">
                        <li><code>value === ""</code> (–ü—Ä–∞–∑–Ω–æ –ª–∏ –µ?)</li>
                        <li><code>value.length < 5</code> (–¢–≤—ä—Ä–¥–µ –∫—ä—Å–æ?)</li>
                        <li><code>regex.test(email)</code> (–í–∞–ª–∏–¥–µ–Ω –∏–º–µ–π–ª —Ñ–æ—Ä–º–∞—Ç?)</li>
                    </ul>
                `,
          interactive: `
                    <div class="interactive-box">
                        <form id="demo-form" onsubmit="event.preventDefault(); validateForm();" class="space-y-3">
                            <div>
                                <label class="block text-xs font-bold text-gray-700">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª (–º–∏–Ω 3 —Å–∏–º–≤–æ–ª–∞)</label>
                                <input type="text" id="val-user" class="border p-2 rounded w-full border-gray-300">
                                <p id="err-user" class="text-red-500 text-xs hidden">–¢–≤—ä—Ä–¥–µ –∫—Ä–∞—Ç–∫–æ –∏–º–µ!</p>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-700">–ü–∞—Ä–æ–ª–∞ (–º–∏–Ω 6 —Å–∏–º–≤–æ–ª–∞)</label>
                                <input type="password" id="val-pass" class="border p-2 rounded w-full border-gray-300">
                                <p id="err-pass" class="text-red-500 text-xs hidden">–°–ª–∞–±–∞ –ø–∞—Ä–æ–ª–∞!</p>
                            </div>
                            <button type="submit" class="bg-teal-800 text-white w-full py-2 rounded hover:bg-teal-900">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                        </form>
                        <div id="form-success" class="hidden mt-3 bg-green-100 text-green-800 p-2 rounded text-center font-bold">–£—Å–ø–µ—à–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è!</div>
                    </div>
                `,
          exercise: {
            type: "quiz",
            question: "–ó–∞—â–æ –≤–∞–ª–∏–¥–∏—Ä–∞–º–µ —Å JavaScript (Client-side)?",
            options: [
              "–ó–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç",
              "–ó–∞ –ø–æ-–¥–æ–±—Ä–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–∑–∂–∏–≤—è–≤–∞–Ω–µ (–±—ä—Ä–∑–∞ —Ä–µ–∞–∫—Ü–∏—è)",
              "–ó–∞—â–æ—Ç–æ HTML –Ω–µ –º–æ–∂–µ",
            ],
            answer: 1,
          },
        },
        {
          id: "final_project",
          title: "8. –ü—Ä–æ–µ–∫—Ç: To-Do –°–ø–∏—Å—ä–∫",
          icon: "fa-clipboard-list",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–°—ä–≤–∫—É–ø–Ω–æ—Å—Ç –æ—Ç –∑–Ω–∞–Ω–∏—è: DOM –ú–∞–Ω–∏–ø—É–ª–∞—Ü–∏—è</h2>
                    <p class="mb-4">–í —Ç–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç —â–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≤—Å–∏—á–∫–æ –Ω–∞—É—á–µ–Ω–æ, –∑–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ —Ä–∞–±–æ—Ç–µ—â —Å–ø–∏—Å—ä–∫ —Å—ä—Å –∑–∞–¥–∞—á–∏. –¢—Ä—è–±–≤–∞ –¥–∞ –≤–∑–µ–º–µ—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç –æ—Ç –ø–æ–ª–µ, –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ –µ–ª–µ–º–µ–Ω—Ç –∏ –¥–∞ –≥–æ –¥–æ–±–∞–≤–∏—Ç–µ –≤ —Å–ø–∏—Å—ä–∫–∞.</p>
                    <h3 class="font-bold">–ö–∞–∫–≤–æ —â–µ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ:</h3>
                    <ul class="list-disc pl-5 mb-4 text-sm">
                        <li><code>document.getElementById('id').value</code> - –∑–∞ –≤–∑–∏–º–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç.</li>
                        <li><code>document.createElement('li')</code> - –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤ –µ–ª–µ–º–µ–Ω—Ç.</li>
                        <li><code>ul.appendChild(li)</code> - –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –≤ —Å–ø–∏—Å—ä–∫–∞.</li>
                    </ul>
                `,
          interactive: `
                    <div class="interactive-box relative">
                        <h4 class="font-bold mb-2 text-teal-700">To-Do App (Live Preview)</h4>
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="todo-input" class="border p-2 rounded flex-grow" placeholder="–ù–æ–≤–∞ –∑–∞–¥–∞—á–∞...">
                            <button id="todo-btn" onclick="runUserTodoLogic()" class="bg-teal-600 text-white px-4 py-2 rounded">–î–æ–±–∞–≤–∏</button>
                        </div>
                        <ul id="todo-list" class="list-disc pl-5 text-sm space-y-1">
                            <li>–ü—Ä–∏–º–µ—Ä–Ω–∞ –∑–∞–¥–∞—á–∞</li>
                        </ul>
                    </div>
                `,
          codeChallenge: {
            title: "–ó–∞–¥–∞—á–∞: –ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–π –±—É—Ç–æ–Ω–∞ '–î–æ–±–∞–≤–∏'",
            desc: "–ù–∞–ø–∏—à–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è <code>addItem()</code>, –∫–æ—è—Ç–æ: <br>1. –í–∑–∏–º–∞ —Ç–µ–∫—Å—Ç–∞ –æ—Ç input —Å id <code>todo-input</code>.<br>2. –°—ä–∑–¥–∞–≤–∞ –Ω–æ–≤ <code>li</code> –µ–ª–µ–º–µ–Ω—Ç —Å —Ç–æ–∑–∏ —Ç–µ–∫—Å—Ç.<br>3. –î–æ–±–∞–≤—è –≥–æ –∫—ä–º <code>ul</code> —Å id <code>todo-list</code>.",
            placeholder:
              "function addItem() {\n  // 1. –í–∑–µ–º–∏ –∏–Ω–ø—É—Ç–∞\n  let input = document.getElementById('todo-input');\n  let text = input.value;\n\n  // 2. –°—ä–∑–¥–∞–π –µ–ª–µ–º–µ–Ω—Ç\n  // ...\n\n  // 3. –î–æ–±–∞–≤–∏ –≤ —Å–ø–∏—Å—ä–∫–∞\n  // ...\n}",
            check: (code) => {
              // Advanced check: We inject the user code and try to run it visually
              try {
                // Reset for test
                const list = document.getElementById("todo-list");
                const input = document.getElementById("todo-input");
                const initialCount = list.children.length;

                input.value = "Test Task " + Math.random();

                // Eval user code to define function
                eval(code);

                // Call user function
                if (typeof addItem === "function") {
                  addItem();
                  // Check result
                  if (
                    list.children.length > initialCount &&
                    list.lastElementChild.innerText.includes("Test Task")
                  ) {
                    return true;
                  }
                }
                return false;
              } catch (e) {
                console.error(e);
                return false;
              }
            },
            successMsg: "–°—Ç—Ä–∞—Ö–æ—Ç–Ω–æ! –ù–∞–ø—Ä–∞–≤–∏—Ö—Ç–µ —Ä–∞–±–æ—Ç–µ—â To-Do —Å–ø–∏—Å—ä–∫!",
            failMsg:
              "–ó–∞–¥–∞—á–∞—Ç–∞ –Ω–µ —Å–µ –¥–æ–±–∞–≤–∏. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ appendChild –∏ innerText.",
          },
          exercise: {
            type: "quiz",
            question: "–ö–æ—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤—è –µ–ª–µ–º–µ–Ω—Ç –∫–∞—Ç–æ –¥–µ—Ç–µ –Ω–∞ –¥—Ä—É–≥ –µ–ª–µ–º–µ–Ω—Ç?",
            options: ["createElement()", "appendChild()", "removeChild()"],
            answer: 1,
          },
        },
        {
          id: "project_users",
          title: "9. –ë–æ–Ω—É—Å –ü—Ä–æ–µ–∫—Ç: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏",
          icon: "fa-user-plus",
          theory: `
                    <h2 class="text-2xl font-bold mb-4">–ë–æ–Ω—É—Å –ü—Ä–æ–µ–∫—Ç: –ú–µ–Ω–∏–¥–∂—ä—Ä –Ω–∞ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h2>
                    <p class="mb-4">–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç –∫–æ–º–±–∏–Ω–∏—Ä–∞ <strong>–§–æ—Ä–º—É–ª—è—Ä–∏</strong>, <strong>–í–∞–ª–∏–¥–∞—Ü–∏—è</strong> –∏ <strong>–î–∏–Ω–∞–º–∏—á–Ω–∏ –¢–∞–±–ª–∏—Ü–∏</strong>. –í–∞—à–∞—Ç–∞ —Ü–µ–ª –µ –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–∞–º–æ –∞–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –≤–∞–ª–∏–¥–Ω–∏.</p>
                    
                    <h3 class="font-bold text-teal-800">–ò–∑–∏—Å–∫–≤–∞–Ω–∏—è:</h3>
                    <ul class="list-disc pl-5 mb-4 text-sm space-y-1">
                        <li><strong>–ò–º–µ:</strong> –ü–æ–Ω–µ 3 —Å–∏–º–≤–æ–ª–∞.</li>
                        <li><strong>Email:</strong> –¢—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ —Å–∏–º–≤–æ–ª–∞ '@'.</li>
                        <li><strong>–î–µ–π—Å—Ç–≤–∏–µ:</strong> –ê–∫–æ –µ –≤–∞–ª–∏–¥–Ω–æ -> –¥–æ–±–∞–≤–∏ –Ω–æ–≤ —Ä–µ–¥ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞. –ê–∫–æ –Ω–µ -> –ø–æ–∫–∞–∂–∏ alert –∏–ª–∏ –≥—Ä–µ—à–∫–∞.</li>
                    </ul>
                `,
          interactive: `
                    <div class="interactive-box">
                        <h4 class="font-bold mb-4 text-teal-700 text-center">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–µ–Ω –ü–∞–Ω–µ–ª</h4>
                        
                        <!-- Form Section -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-4 bg-slate-50 p-4 rounded border">
                            <input type="text" id="reg-name" placeholder="–ò–º–µ (–º–∏–Ω 3 —Å–∏–º–≤.)" class="border p-2 rounded text-sm">
                            <input type="text" id="reg-email" placeholder="Email (–∏–º–∞ @)" class="border p-2 rounded text-sm">
                            <button onclick="runUserRegLogic()" class="bg-blue-600 text-white font-bold py-2 rounded hover:bg-blue-700 transition">
                                <i class="fas fa-plus-circle"></i> –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–π
                            </button>
                        </div>

                        <!-- Table Section -->
                        <div class="overflow-hidden rounded border border-gray-200">
                            <table class="min-w-full text-sm">
                                <thead class="bg-slate-100 text-slate-700">
                                    <tr>
                                        <th class="px-4 py-2 text-left">–ò–º–µ</th>
                                        <th class="px-4 py-2 text-left">Email</th>
                                        <th class="px-4 py-2 text-left">–°—Ç–∞—Ç—É—Å</th>
                                    </tr>
                                </thead>
                                <tbody id="user-table-body" class="divide-y divide-gray-200 bg-white">
                                    <tr>
                                        <td class="px-4 py-2">Admin User</td>
                                        <td class="px-4 py-2">admin@system.com</td>
                                        <td class="px-4 py-2"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Active</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="reg-error" class="text-red-500 text-xs mt-2 font-bold hidden text-center">–ì—Ä–µ—à–∫–∞ –≤—ä–≤ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞!</div>
                    </div>
                `,
          codeChallenge: {
            title: "–ó–∞–¥–∞—á–∞: –ù–∞–ø–∏—à–∏ –ª–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
            desc: "–î–µ—Ñ–∏–Ω–∏—Ä–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è <code>registerUser()</code>. –¢—è —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∑–µ–º–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ –æ—Ç –ø–æ–ª–µ—Ç–∞—Ç–∞, –¥–∞ –≥–∏ –ø—Ä–æ–≤–µ—Ä–∏, –∏ –∞–∫–æ —Å–∞ –≤–∞–ª–∏–¥–Ω–∏, –¥–∞ –¥–æ–±–∞–≤–∏ –Ω–æ–≤ —Ä–µ–¥ –∫—ä–º <code>tbody</code> —Å ID <code>user-table-body</code>.",
            placeholder: `function registerUser() {
  // 1. –í–∑–µ–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ (reg-name, reg-email)
  let nameEl = document.getElementById('reg-name');
  let emailEl = document.getElementById('reg-email');
  let table = document.getElementById('user-table-body');
  
  // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è
  // if (nameEl.value.length < 3) ...
  
  // 3. –î–æ–±–∞–≤—è–Ω–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
  // table.innerHTML += "<tr>...</tr>";
}`,
            check: (code) => {
              try {
                // Reset inputs for clean test
                const nameIn = document.getElementById("reg-name");
                const emailIn = document.getElementById("reg-email");
                const table = document.getElementById("user-table-body");
                const initialRows = table.rows.length;

                // TEST 1: Invalid Data
                nameIn.value = "Jo";
                emailIn.value = "invalid";

                eval(code); // Load user function
                if (typeof registerUser === "function") {
                  registerUser();
                  if (table.rows.length > initialRows) return false; // Should not add invalid

                  // TEST 2: Valid Data
                  nameIn.value = "TestUser";
                  emailIn.value = "test@domain.com";
                  registerUser();

                  if (
                    table.rows.length === initialRows + 1 &&
                    table.innerHTML.includes("TestUser")
                  ) {
                    return true;
                  }
                }
                return false;
              } catch (e) {
                console.error(e);
                return false;
              }
            },
            successMsg:
              "–ë—Ä–∞–≤–æ! –£—Å–ø–µ—à–Ω–æ —Å—ä–∑–¥–∞–¥–æ—Ö—Ç–µ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏!",
            failMsg:
              "–ò–º–∞ –ø—Ä–æ–±–ª–µ–º. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ –∏–ª–∏ –¥–æ–±–∞–≤—è–Ω–µ—Ç–æ –Ω–∞ HTML –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞.",
          },
          exercise: {
            type: "quiz",
            question: "–ö–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞ –º–∞—Å–∏–≤–∞ –≤—Ä—ä—â–∞ –±—Ä–æ—è –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –≤ –Ω–µ–≥–æ?",
            options: ["size", "count", "length"],
            answer: 2,
          },
        },
      ];

      // --- STATE MANAGEMENT ---
      let currentTopicIndex = 0;
      let progress = new Array(curriculum.length).fill(false);

      // --- OBJECT DEMO STATE ---
      let demoCar = { brand: "Toyota", color: "Red", year: 2022 };
      let clickCount = 0;

      // --- INIT ---
      function init() {
        renderNav();
        loadTopic(0);
      }

      // --- RENDER FUNCTIONS ---
      function renderNav() {
        const nav = document.getElementById("nav-container");
        nav.innerHTML = curriculum
          .map(
            (topic, index) => `
                <div onclick="loadTopic(${index})" 
                     class="nav-item cursor-pointer p-3 px-6 flex items-center justify-between ${
                       index === currentTopicIndex
                         ? "nav-active"
                         : "text-teal-700"
                     }">
                    <span class="flex items-center gap-3">
                        <i class="fas ${topic.icon} w-5 text-center"></i>
                        <span class="text-sm">${topic.title}</span>
                    </span>
                    ${
                      progress[index]
                        ? '<i class="fas fa-check-circle text-green-500"></i>'
                        : ""
                    }
                </div>
            `
          )
          .join("");

        // Update Progress Bar
        const percent = Math.round(
          (progress.filter(Boolean).length / curriculum.length) * 100
        );
        document.getElementById("progress-bar").style.width = `${percent}%`;
        document.getElementById(
          "progress-text"
        ).innerText = `–ü—Ä–æ–≥—Ä–µ—Å: ${percent}%`;
      }

      function loadTopic(index) {
        currentTopicIndex = index;
        renderNav();

        const topic = curriculum[index];
        const content = document.getElementById("content-area");

        content.innerHTML = `
                <div class="animate-fade-in space-y-8">
                    <!-- Theory Section -->
                    <section class="bg-white p-6 rounded-xl shadow-lg border border-teal-100">
                        ${topic.theory}
                    </section>

                    <!-- Interactive Demo Section (if exists) -->
                    ${
                      topic.interactive
                        ? `
                    <section>
                        <h3 class="text-lg font-bold text-teal-800 mb-3"><i class="fas fa-laptop-code mr-2"></i>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</h3>
                        ${topic.interactive}
                    </section>
                    `
                        : ""
                    }

                    <!-- CODING CHALLENGE Section (New) -->
                    ${
                      topic.codeChallenge
                        ? `
                    <section class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-600 text-white">
                        <div class="flex items-center gap-2 mb-4">
                            <i class="fas fa-terminal text-green-400 text-xl"></i>
                            <h3 class="text-lg font-bold text-green-400">Code Challenge: ${topic.codeChallenge.title}</h3>
                        </div>
                        <p class="mb-4 text-slate-300 text-sm">${topic.codeChallenge.desc}</p>
                        
                        <textarea id="code-editor-${index}" class="editor-area mb-3" spellcheck="false">${topic.codeChallenge.placeholder}</textarea>
                        
                        <div class="flex justify-between items-center">
                            <button onclick="runCodeChallenge(${index})" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-bold transition flex items-center gap-2">
                                <i class="fas fa-play"></i> –¢–µ—Å—Ç–≤–∞–π –∫–æ–¥–∞
                            </button>
                            <div id="code-feedback-${index}" class="text-sm font-bold hidden"></div>
                        </div>
                    </section>
                    `
                        : ""
                    }

                    <!-- Exercise/Quiz Section -->
                    <section class="bg-teal-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fas fa-brain text-9xl"></i></div>
                        <h3 class="text-lg font-bold mb-4 z-10 relative">–¢–µ—Å—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–Ω–∞–Ω–∏—è—Ç–∞</h3>
                        <div class="z-10 relative">
                            <p class="mb-4 text-teal-100">${
                              topic.exercise.question
                            }</p>
                            <div class="space-y-2">
                                ${topic.exercise.options
                                  .map(
                                    (opt, i) => `
                                    <button onclick="checkAnswer(${i}, ${
                                      topic.exercise.answer
                                    })" 
                                            class="quiz-btn w-full text-left p-3 rounded bg-teal-800 hover:bg-teal-700 border border-teal-700 transition">
                                        ${String.fromCharCode(65 + i)}. ${opt}
                                    </button>
                                `
                                  )
                                  .join("")}
                            </div>
                            <div id="feedback-area" class="mt-4 hidden font-bold"></div>
                        </div>
                    </section>

                    <!-- Next Button -->
                    <div class="flex justify-end mt-8">
                        ${
                          index < curriculum.length - 1
                            ? `<button onclick="loadTopic(${
                                index + 1
                              })" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-full font-bold shadow-lg flex items-center gap-2">–°–ª–µ–¥–≤–∞—â –£—Ä–æ–∫ <i class="fas fa-arrow-right"></i></button>`
                            : `<div class="text-teal-700 font-bold text-xl">–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è! –ö—É—Ä—Å—ä—Ç –µ –∑–∞–≤—ä—Ä—à–µ–Ω! üéì</div>`
                        }
                    </div>
                </div>
            `;

        // Init specific dynamic elements if needed
        if (topic.id === "objects") updateObjectDisplay();
      }

      // --- CODE CHALLENGE RUNNER ---
      function runCodeChallenge(index) {
        const topic = curriculum[index];
        const userCode = document.getElementById(`code-editor-${index}`).value;
        const feedbackEl = document.getElementById(`code-feedback-${index}`);

        feedbackEl.classList.remove("hidden", "text-green-400", "text-red-400");
        feedbackEl.innerText = "–ü—Ä–æ–≤–µ—Ä—è–≤–∞–Ω–µ...";

        // Delay for effect
        setTimeout(() => {
          const passed = topic.codeChallenge.check(userCode);

          if (passed) {
            feedbackEl.innerText = topic.codeChallenge.successMsg;
            feedbackEl.classList.add("text-green-400");
            // Mark progress (optional logic for challenges)
          } else {
            feedbackEl.innerText = topic.codeChallenge.failMsg;
            feedbackEl.classList.add("text-red-400");
          }
        }, 300);
      }

      // Bridge for the Todo button to call user defined function
      function runUserTodoLogic() {
        const index = curriculum.findIndex((t) => t.id === "final_project");
        const userCode = document.getElementById(`code-editor-${index}`).value;

        try {
          // Execute in global scope to ensure function is accessible
          window.eval(userCode);

          if (typeof window.addItem === "function") {
            window.addItem();
          } else {
            alert(
              "–§—É–Ω–∫—Ü–∏—è—Ç–∞ addItem() –Ω–µ –µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∞! –ú–æ–ª—è, –¥–µ—Ñ–∏–Ω–∏—Ä–∞–π—Ç–µ —è –≤ –ø–æ–ª–µ—Ç–æ –∑–∞ –∫–æ–¥."
            );
          }
        } catch (e) {
          alert("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ: " + e.message);
        }
      }

      // Bridge for the User Registration project
      function runUserRegLogic() {
        const index = curriculum.findIndex((t) => t.id === "project_users");
        const userCode = document.getElementById(`code-editor-${index}`).value;

        try {
          window.eval(userCode);

          if (typeof window.registerUser === "function") {
            window.registerUser();
          } else {
            alert(
              "–§—É–Ω–∫—Ü–∏—è—Ç–∞ registerUser() –Ω–µ –µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∞! –ú–æ–ª—è, –¥–µ—Ñ–∏–Ω–∏—Ä–∞–π—Ç–µ —è –≤ –ø–æ–ª–µ—Ç–æ –∑–∞ –∫–æ–¥."
            );
          }
        } catch (e) {
          alert("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ: " + e.message);
        }
      }

      // --- INTERACTIVE LOGIC ---

      // 1. Calculator
      function runCalc() {
        const a = document.getElementById("demo-var-a").value;
        const b = document.getElementById("demo-var-b").value;
        const op = document.getElementById("demo-op").value;
        let res;

        let valA = isNaN(Number(a)) ? a : Number(a);

        try {
          if (op === "==") res = (a == b) + " (–°—Ä–∞–≤–Ω—è–≤–∞ —Å–∞–º–æ —Å—Ç–æ–π–Ω–æ—Å—Ç)";
          else if (op === "===") res = (a === b) + " (–°—Ä–∞–≤–Ω—è–≤–∞ —Ç–∏–ø –ò —Å—Ç–æ–π–Ω–æ—Å—Ç)";
          else res = eval(`${a} ${op} ${b}`);
        } catch (e) {
          res = "Error";
        }

        document.getElementById("calc-result").innerText = `–†–µ–∑—É–ª—Ç–∞—Ç: ${res}`;
      }

      // 2. Loop Visualizer
      function runLoop() {
        const limit = document.getElementById("loop-limit").value;
        const output = document.getElementById("loop-output");
        output.innerHTML = "";

        let i = 0;
        const interval = setInterval(() => {
          if (i >= limit) {
            clearInterval(interval);
            return;
          }
          const box = document.createElement("div");
          box.className =
            "w-8 h-8 bg-yellow-400 rounded flex items-center justify-center font-bold animate-bounce";
          box.innerText = i;
          output.appendChild(box);
          i++;
        }, 500);
      }

      // 3. Functions
      function runGreet() {
        const name = document.getElementById("func-name").value || "–ù–µ–ø–æ–∑–Ω–∞—Ç";
        document.getElementById("greet-result").innerText = `–ó–¥—Ä–∞–≤–µ–π, ${name}!`;
      }

      // 4. Objects
      function updateObjectDisplay() {
        document.getElementById(
          "obj-display"
        ).innerHTML = `let car = ${JSON.stringify(demoCar, null, 4)};`;
      }
      function updateObject() {
        const color = document.getElementById("car-color").value;
        if (color) demoCar.color = color;
        updateObjectDisplay();
        document.getElementById("car-color").value = "";
      }

      // 5. Events
      function triggerClickAnim(el) {
        clickCount++;
        document.getElementById(
          "click-counter"
        ).innerText = `Clicks: ${clickCount}`;
        el.innerText = "Click!";
        el.classList.add("scale-90");
        setTimeout(() => {
          el.innerText = "Hover Me";
          el.classList.remove("scale-90");
        }, 200);
      }

      // 6. Validation
      function validateForm() {
        const user = document.getElementById("val-user");
        const pass = document.getElementById("val-pass");
        const errUser = document.getElementById("err-user");
        const errPass = document.getElementById("err-pass");
        const success = document.getElementById("form-success");

        let valid = true;
        success.classList.add("hidden");

        if (user.value.length < 3) {
          user.classList.add("border-red-500");
          user.parentElement.classList.add("shake");
          errUser.classList.remove("hidden");
          valid = false;
        } else {
          user.classList.remove("border-red-500");
          user.parentElement.classList.remove("shake");
          errUser.classList.add("hidden");
          user.classList.add("border-green-500");
        }

        if (pass.value.length < 6) {
          pass.classList.add("border-red-500");
          pass.parentElement.classList.add("shake");
          errPass.classList.remove("hidden");
          valid = false;
        } else {
          pass.classList.remove("border-red-500");
          pass.parentElement.classList.remove("shake");
          errPass.classList.add("hidden");
          pass.classList.add("border-green-500");
        }

        setTimeout(() => {
          user.parentElement.classList.remove("shake");
          pass.parentElement.classList.remove("shake");
        }, 500);

        if (valid) {
          success.classList.remove("hidden");
        }
      }

      // --- QUIZ LOGIC ---
      function checkAnswer(selected, correct) {
        const feedback = document.getElementById("feedback-area");
        const buttons = document.querySelectorAll(".quiz-btn");

        buttons.forEach((btn) => (btn.disabled = true));

        if (selected === correct) {
          feedback.innerHTML =
            '<span class="text-green-300"><i class="fas fa-check-circle"></i> –ü—Ä–∞–≤–∏–ª–Ω–æ! –ß—É–¥–µ—Å–Ω–∞ —Ä–∞–±–æ—Ç–∞.</span>';
          buttons[selected].classList.add("bg-green-600", "border-green-400");
          progress[currentTopicIndex] = true;
          renderNav();
        } else {
          feedback.innerHTML =
            '<span class="text-red-300"><i class="fas fa-times-circle"></i> –ì—Ä–µ—à–∫–∞. –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ!</span>';
          buttons[selected].classList.add("bg-red-800", "border-red-600");
          buttons[correct].classList.add("bg-green-600", "border-green-400");
        }
        feedback.classList.remove("hidden");
      }

      // Start App
      init();
    </script>
  </body>
</html>
